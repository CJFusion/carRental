<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Add New Cars</title>
	<script type="text/javascript" src="https://maraks-car-rental.000webhostapp.com/assets/app.js"></script>
</head>

<body>
	<nav class="navBar flexCentered">
		<div class="flexItem">
			<h2>Add New Cars</h2>
		</div>
	</nav>

	<div class="grid">
		<form id="addCar" onsubmit="return addCar(event)">
			<label for="model">Model:</label>
			<input type="text" id="model" name="model" oninput="validateInput(event, /[^a-zA-Z0-9- ]/g)" required><br>

			<label for="licenseNumber">License Number:</label>
			<input type="text" id="licenseNumber" name="licenseNumber" oninput="validateInput(event, /[^a-zA-Z0-9 ]/g)"
				required><br>

			<label for="capacity">Seating Capacity:</label>
			<input type="number" id="capacity" name="capacity" min="1" max="99"
				oninput="validateInput(event, /[^0-9]/g)" required><br>

			<label for="rentPerDay">Rent Per Day:</label>
			<input type="number" id="rentPerDay" name="rentPerDay" min="1" oninput="validateInput(event, /[^0-9]/g)"
				required><br>

			<div id="registerError"></div>
			<input type="submit" value="Add Car">
		</form>
	</div>
	<style>
		#registerError,
		#passwordError {
			display: none;
			color: rgb(217, 48, 37);
			align-self: center;
			font-size: 12px;
			transform: translateY(-10px);
		}

		:is(#registerError, #passwordError)::before {
			content: '!';
			color: white;
			padding: 2px;
			font-family: Carlito;
			font-size: 0.8em;
			margin-right: 5px;
			width: 1.2em;
			height: 1.2em;
			border-radius: 50%;
			background-color: rgb(217, 48, 37);
			text-align: center;
		}

		br {
			color: red;
			/* display: none; */
		}

		input[type=number]::-webkit-inner-spin-button,
		input[type=number]::-webkit-outer-spin-button {
			-webkit-appearance: none;
			-moz-appearance: none;
			appearance: none;
			margin: 0;
		}

		input[type=number] {
			-moz-appearance: textfield;
		}
	</style>

	<script>

		const addCar = (event) => {
			event.preventDefault();

			let formData = new FormData(event.target);

			const onFailure = (data) => {
				document.getElementById("registerError").style.display = 'flex';
				document.getElementById("registerError").textContent = data.message;
			}

			const onSuccess = (data) => {
				window.location.href = window.location.origin + '/home/rentCar.html'
			}

			requestFetch('/api/Cars', 'POST', formData, onFailure, onSuccess);
		}

	</script>
</body>

</html>