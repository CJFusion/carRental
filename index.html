<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!--<meta name="author" content="Mr.X"> -->
	<!--<meta name="Linkedin profile" content="WWW.linkedin.com/Mr.X_123" > -->

	<!--<meta name="description " -->
	<!--content="A better place to learn computer science"> -->
	<!-- to explain about website in few words -->

	<title>Login Page</title>

	<link rel="stylesheet" type="text/css" href="assets/app.css">

	<script type="text/javascript" src="assets/app.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body class="centeredBody" id="loginBody">
	<!-- Main Content -->
	<div class="container">
		<form id="loginForm" onsubmit="return loginAuth(event)">
			<input type="text" name="username" placeholder="Username" required>
			<input type="password" name="password" placeholder="Password" required>
			<div id="loginError">Login failed</div>




			<input type="submit" class="blueBtn" value="Login">
		</form>
		<div class="hrule"></div>
		<button class="greenBtn" onclick="openOverlay()">Create new account</button>
	</div>

	<!-- Overlay content -->
	<div id="overlay" class="overlay">
		<div class="overlay-content">
			<span class="close-btn" onclick="closeOverlay()">&times;</span>
			<h2>Choose account type</h2>
			<button class="register-btn" onclick="selAccount('customer')">Customer</button>
			<button class="register-btn" onclick="selAccount('rentalAgency')">Rental Agency</button>
		</div>
	</div>

	<script>
		const loginAuth = (event) => {
			event.preventDefault();

			var formData = new FormData(event.target);

			fetch('assets/login.php', {
				method: 'POST',
				body: formData,
			}).then(response => {
				if (!response.ok)
					throw new Error('Network response was not ok.');
				return response.json();
			}).then(data => {
				console.table(data);
				console.log(data.loginStatus);
				if (data.loginStatus === 'Login successful') {
					window.location.href = 'home/rentCar.html';
				} else {
					document.getElementById("loginError").style.display = 'flex';
					document.getElementById("loginError").textContent = data.loginStatus;
				}
			}).catch(error => { console.error('Fetch API error:', error); });
		};
	</script>

	<style>
		#loginError {
			display: none;
			color: rgb(217, 48, 37);
			align-self: center;
			font-size: 12px;
			transform: translateY(-10px);
		}

		#loginError::before {
			content: '!';
			color: white;
			padding: 2px;
			font-family: Carlito;
			font-size: 0.8em;
			margin-right: 5px;
			width: 1.2em;
			height: 1.2em;
			border-radius: 50%;
			background-color: rgb(217, 48, 37);
			text-align: center;
		}
	</style>

</body>

</html>